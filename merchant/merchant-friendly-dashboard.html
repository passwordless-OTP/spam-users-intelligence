<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Customer Email Protection - Dashboard</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link rel="stylesheet" href="merchant-theme.css">
    <!--
      Production-Grade Merchant Dashboard
      This file is production-ready and intended for customer/partner demos.
      All styles are externalized. Accessibility and responsive best practices are followed.
    -->
    <!-- End styles: all further styling in merchant-theme.css -->
                <div class="title-content">
                    <h1>Customer Email Protection</h1>
                    <p>Monitor and manage email verification to protect your business from fraud</p>
                </div>
            </div>
            
            <div class="dashboard-actions">
                <button class="action-btn">
                    <i class="fas fa-download"></i> Export Report
                </button>
                <button class="action-btn" onclick="window.location.href='merchant-friendly-rules.html'">
                    <i class="fas fa-cog"></i> Protection Settings
                </button>
                <button class="action-btn primary">
                    <i class="fas fa-search"></i> Check Email
                </button>
            </div>
        </div>
        
        <!-- Recommended Action Alert -->
        <div class="recommended-action">
            <div class="recommended-action-icon">
                <i class="fas fa-lightbulb"></i>
            </div>
            <div class="recommended-action-content">
                <h4 class="recommended-action-title">Recommended Action: Block Temporary Email Service</h4>
                <p class="recommended-action-description">We've detected 5 suspicious signups from <strong>tempmail.org</strong> in the last 24 hours. These are likely fraudulent accounts.</p>
                <div class="recommended-action-buttons">
                    <button class="action-btn success" id="applyRuleBtn">
                        <i class="fas fa-check"></i> Block This Service
                    </button>
                    <button class="action-btn" id="dismissRuleBtn">
                        <i class="fas fa-times"></i> Dismiss
                    </button>
                </div>
            </div>
        </div>
        
        <!-- Main Navigation -->
        <nav class="main-nav" aria-label="Main navigation">
            <a href="merchant-friendly-dashboard.html" class="nav-item active">
                <i class="fas fa-chart-bar nav-icon"></i> Dashboard
            </a>
            <a href="merchant-friendly-rules.html" class="nav-item">
                <i class="fas fa-shield-alt nav-icon"></i> Protection Rules <span class="nav-badge">3</span>
            </a>
            <a href="merchant-friendly-email-lookup.html" class="nav-item">
                <i class="fas fa-cog nav-icon"></i> Settings
            </a>
        </nav>
        
        <div class="dashboard-filters">
            <span class="filter-label">Time Period:</span>
            <div class="filter-options">
                <div class="filter-option">Today</div>
                <div class="filter-option">Yesterday</div>
                <div class="filter-option active">Last 7 Days</div>
                <div class="filter-option">Last 30 Days</div>
                <div class="filter-option">Custom</div>
            </div>
        </div>
        
        <!-- Dashboard Content -->
        <div class="dashboard-content">
            <div class="dashboard-grid">
                <!-- Business Impact Cards -->
                <div class="card card-md">
    <div class="card-header">
        <h3 class="card-title">Fraud Prevention Value</h3>
        <div class="tooltip">
            <i class="fas fa-info-circle"></i>
            <span class="tooltip-text">
                Total estimated value of fraud blocked based on your store's average order value.<br><br>
                <strong>How is this calculated?</strong><br>
                Blocked Signups × Avg. Order Value = Fraud Prevention Value.
            </span>
        </div>
      </span>
    </div>
  </div>
  <div class="business-impact-card highlight">
    <div class="business-impact-value">
      <i class="fas fa-shield-alt icon-green"></i> $2,860
      <span class="trend-up"><i class="fas fa-arrow-up"></i> 15%</span>
    </div>
    <div class="business-impact-description">
      Estimated fraud prevented in the last 7 days.<br>
      <span class="impact-details">
        Based on 114 blocked signups × $25 avg. order value.<br>
        <strong>Blocked 21% of all signups as fraud</strong>
      </span>
    </div>
    <div class="roi-callout">
      <span class="badge badge-success">ROI: 4× subscription</span>
      <span class="badge badge-info">Record Week!</span>
    </div>
    <div class="stat-breakdown">
      <div><strong>Blocked Signups:</strong> 114 <span class="tooltip"><i class="fas fa-info-circle"></i><span class="tooltip-text">Number of signups automatically blocked as suspicious or fraudulent.</span></span></div>
      <div><strong>Top Source:</strong> tempmail.org (23 signups) <span class="tooltip"><i class="fas fa-info-circle"></i><span class="tooltip-text">Most frequent source of blocked fraud attempts.</span></span></div>
      <div><strong>Chargebacks Prevented:</strong> 3 <span class="tooltip"><i class="fas fa-info-circle"></i><span class="tooltip-text">Estimated chargebacks avoided by blocking fraud signups.</span></span></div>
      <div><strong>Time Saved:</strong> 6.5 hrs <span class="tooltip"><i class="fas fa-info-circle"></i><span class="tooltip-text">Manual review/support hours saved by automated blocking.</span></span></div>
    </div>
    <div class="actionable-tip">
      <i class="fas fa-lightbulb"></i>
      Consider tightening your protection rules for even more savings.
    </div>
  </div>
</div>

<!-- Blocked Signups Trend Chart -->
<div class="card card-full">
    <div class="card-header">
        <h3 class="card-title">Blocked Signups Trend</h3>
        <div class="tooltip">
            <i class="fas fa-info-circle"></i>
            <span class="tooltip-text">See how fraud attempts and signups have changed over time.</span>
        </div>
    </div>
    <div class="chart-container">
        <canvas id="blockedSignupsChart"></canvas>
    </div>
</div>

<!-- Top 5 Blocked Domains/Providers -->
<div class="card card-md">
    <div class="card-header">
        <h3 class="card-title">Top 5 Blocked Domains/Providers</h3>
        <div class="tooltip">
            <i class="fas fa-info-circle"></i>
            <span class="tooltip-text">The most common sources of fraudulent signup attempts.</span>
        </div>
    </div>
    <div class="chart-container">
        <canvas id="blockedDomainsChart"></canvas>
    </div>
</div>

<!-- Time Saved -->
<div class="card card-md">
    <div class="card-header">
        <h3 class="card-title">Time Saved</h3>
        <div class="tooltip">
            <i class="fas fa-info-circle"></i>
            <span class="tooltip-text">Estimated time saved from manual review based on average handling time.</span>
        </div>
    </div>
    <div class="chart-container">
        <canvas id="timeSavedChart"></canvas>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
// Initialize charts when DOM is loaded
document.addEventListener('DOMContentLoaded', function() {
    // Blocked Signups Trend Chart
    const blockedSignupsCtx = document.getElementById('blockedSignupsChart');
    if (blockedSignupsCtx) {
        new Chart(blockedSignupsCtx, {
            type: 'line',
            data: {
                labels: ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'],
                datasets: [{
                    label: 'Blocked Signups',
                    data: [12, 19, 15, 17, 22, 18, 11],
                    borderColor: '#ef4444',
                    backgroundColor: 'rgba(239, 68, 68, 0.1)',
                    tension: 0.3,
                    fill: true
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: {
                        display: false
                    }
                },
                scales: {
                    y: {
                        beginAtZero: true,
                        grid: {
                            display: true,
                            color: 'rgba(0, 0, 0, 0.05)'
                        }
                    },
                    x: {
                        grid: {
                            display: false
                        }
                    }
                }
            }
        });
    }
    
    // Blocked Domains Chart
    const blockedDomainsCtx = document.getElementById('blockedDomainsChart');
    if (blockedDomainsCtx) {
        new Chart(blockedDomainsCtx, {
            type: 'bar',
            data: {
                labels: ['tempmail.org', 'guerrillamail.com', 'mailinator.com', 'yopmail.com', 'throwawaymail.com'],
                datasets: [{
                    label: 'Blocked Attempts',
                    data: [23, 18, 15, 12, 8],
                    backgroundColor: [
                        '#ef4444',
                        '#f59e0b',
                        '#10b981',
                        '#3b82f6',
                        '#8b5cf6'
                    ],
                    borderWidth: 0
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                indexAxis: 'y',
                plugins: {
                    legend: {
                        display: false
                    }
                },
                scales: {
                    x: {
                        beginAtZero: true,
                        grid: {
                            display: true,
                            color: 'rgba(0, 0, 0, 0.05)'
                        }
                    },
                    y: {
                        grid: {
                            display: false
                        }
                    }
                }
            }
        });
    }
    
    // Time Saved Chart
    const timeSavedCtx = document.getElementById('timeSavedChart');
    if (timeSavedCtx) {
        new Chart(timeSavedCtx, {
            type: 'doughnut',
            data: {
                labels: ['Manual Review Saved', 'Support Tickets Saved', 'Chargeback Disputes Saved'],
                datasets: [{
                    data: [4.5, 1.2, 0.8],
                    backgroundColor: [
                        '#10b981',
                        '#3b82f6',
                        '#8b5cf6'
                    ],
                    borderWidth: 0
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: {
                        position: 'bottom',
                        labels: {
                            boxWidth: 12,
                            padding: 15
                        }
                    }
                },
                cutout: '70%'
            }
        });
    }
    
    // Make filter options clickable
    const filterOptions = document.querySelectorAll('.filter-option');
    filterOptions.forEach(option => {
        option.addEventListener('click', function() {
            filterOptions.forEach(o => o.classList.remove('active'));
            this.classList.add('active');
        });
    });
    
    // Apply Rule button
    const applyRuleBtn = document.getElementById('applyRuleBtn');
    if (applyRuleBtn) {
        applyRuleBtn.addEventListener('click', function() {
            alert('Rule applied! Temporary email services from tempmail.org will now be automatically blocked.');
            document.querySelector('.recommended-action').style.display = 'none';
        });
    }
    
    // Dismiss Rule button
    const dismissRuleBtn = document.getElementById('dismissRuleBtn');
    if (dismissRuleBtn) {
        dismissRuleBtn.addEventListener('click', function() {
            document.querySelector('.recommended-action').style.display = 'none';
        });
    }
});
</script>
